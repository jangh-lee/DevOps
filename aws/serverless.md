# 서버리스란?
- 서버가 없다는 말로 물리적인 서버가 없는 것이 아니고 서버를 구축하지 않아도 서버의 자원을 임시로 활용할 수 있도록 만든 서비스이며 클라우드의 장점이다.
- 대표적인 예로 nodejs로 슬렉 알람을 보내는 코드를 실행하려고 하면 실행할 서버가 필요한데 어쩌다 한 번 보내는 것을 가지고 24시간 서버를 돌리기에는 비용과 유지보수(서버가 꺼지면 알람이 안되니가)가 또 필요하게 된다.
-
# cloud native pattern
- XaaS(Everything as a Service) 또는 클라우드 native pattern
- FaaS(Function as a service)로 별도의 플랫폼을 가지고 있지 않아도 서버 자원을 서비스 형태로 사용한다. 비용이 줄고, PaaS와 차이는 플랫폼 단위가 아닌 함수 단위로 제공한다느 것이다.
- 확장도 서버 단위가 아닌 함수 단위로 확장한다.
-


기회가 된다면
SaaS, PaaS, IaaS, CaaS(Container as a service), XaaS, FaaS Legacy(기존의 인프라 부터 애플리케이션 구축)
IaaS : 하드웨어 가상화, OS 등 인프라 요소 서비스 제공(AWS EC2)
CaaS : 서비스 형태로 제공되는 컨테이너 활용 배포 (AWS ECS)
PaaS : 애플리케이션 개발에 집중, 인프라와 런타임 환경 제공(서비스리소스 스펙과 사용시간에 따른 과금) AWS Elastic BeanStalk)
SaaS : 제공되는 소프트웨어 사용 (Drop box)
FaaS : 함수코드 구현 (함수 호출 횟수, 수행시간으로 과금) (AWS Lambda)

- 프로비저닝(provisioning) : 사용자 요구에 맞게 시스템 자원 할당, 배치, 배포하다가 즉시 사용할 준비를 맞춰놓는것
-

AWS Cognito : 웹, 모바일 앱에 대한 인증, 권한 부여 및 사용자 관리 제공, 자격 증명 풀을 통해 기타 AWS 서비스에 인증권한 제공


# 스케일 아웃, 스케일 업
- 양적 확장 - scale out
스케일 아웃은 서버의 대수를 늘려 서비스를 확장한다.
그래서 Auto Scaling 서비스는 Scale out과 관련있다.

- 질적 확장 (8G 메모리를 16G로 업데이트 하는 것) -scale up (upgrade)
서버의 스펙 자체를 향상시켜 서비스를 확장한다.

과거에는 서버리스 Lambda를 하나의 job 정도로, 즉 하나의 함수처리를 위한 용도로 사용했으나 요즘에는
프런트를 cloudfront에서 처리하고, 백엔드를 lambda로 처리하기도 한다.
특히 Netfilx의 경우 기존 EC2에서 이미지 리사이징을 했으나, Lambda를 이용해 3분에서 2초로 단축하였다. 비용도 약 1000달러에서 100달러로 감축했다. 그리고 부하 모니터링에 대한 소요도 줄었다.

Kinesis, athena를 통해서 vpc 트래픽 분석을 하기도 한다.



단점
1. 상태유지의 문제
아무래도 한번 사용후 상태를 저장하지 않고 삭제되므로 그 값을 이용해 로직을 구현하는데 어려움이 있다. 그래서 상태저장을 별도로 DB에 하여 해당 값을 유지하는 방법이 있다.
2. Cold Start
아무래도 항시 가동되는 자원이 아니라 트리거를 받고 구동을 시작하기 때문에 예열시간이 존재한다. 만약 함수를 실행한 컨테이너가 잠시 대기 상태로 있는 경우 warm start를 한다고 볼 수 있다.


