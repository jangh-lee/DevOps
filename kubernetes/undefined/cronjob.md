# Cronjob

&#x20;우리가 알고있는 리눅스의 cron과 동일하다.

즉 쿠버네티스에서 시작 간격 또는 시간 간격을 설정해 프로그램을 동작시키는데 쿠버네티스에서는 컨테이너를 동작시킨다.



job의 동작구성

크론잡 -> 잡 -> 파드를 생성한다.



잡 리소스

일정한 처리를 수행하고 완료하는 task를 실행하기 위한 것으로&#x20;

단순히 1회성 작업만 수행하려면 job만 생성하면 된다.

또한 job 리소스는 completed 되는 상태를 목표로 한다.





잡 리소스 동작

* 잡 실행 수
  * 설정 내용에 따라 여러 개의 잡 처리를 병렬로 실행할 수 있다. 잡의 실행 수를 규정하는 파라미터에는 잡 정의와 관련된 .spec.completions와 .spec.parallelism이 있다.
  * .spec.completions는 그 잡이 완료될 때 까지 실행 종료해야 하는 파드 수이다. 기본값은 1이고 명시적으로 설정하지 않으면 파드 하나가 정상 종료되면 그 잡은 완료됨을 의미한다.
  * .spec.parallelism은 그 잡을 실행할 때 병렬로 실행되는 파드 수 이다. 이 또한 기본값은 1이고 명시적으로 설정하지 않으면 '병렬 실행을 수행하지 않음'을 의미한다.



* 잡 실행 패턴

1. 단일 파드 실행하는 실행 패턴

.spec.completions와 .spec.parallelism 모두 기본값 1을 사용하는 경우 잡 리소스 1에 대해 파드 하나가 생성되고 그 파드가 정상 종료되면 잡이 종료된다.

2\. 완료해야할 파드 수를 설정하는 실행 패턴

.spec.completions를 설정한 경우 .spec.completions로 설정한 수의 파드가 정상 종료되면 그 잡은 완료된다. 이 때 .spec.parallelism은 필수가 아니지만 설정한 수 만큼 파드가 병렬로 실행된다. (만약 설정하지 않으면 1개씩 실행되는 것이다)

3\. 작업 큐형 실행 패턴

* 동시에 파드 여러 개를 실행하고 작업 큐를 순차적으로 처리한다. 작업 큐를 사용하는 경우는 큐, 데이터베이스, 파일 등 무엇이든 상관없이 외부 처리 대상을 유지하고 그것을 순차적으로 처리한다. 처리 대상이 없어지면 완료 처리 된다. .spec.completions는 설정하지 않고, .spec.parallelism을 설정해 실행한다.

